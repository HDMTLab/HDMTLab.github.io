<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gallery</title>
  <style>
    .gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    .gallery img {
      width: 300px;
      height: 200px;
      object-fit: cover;
      margin: 10px;
    }

    .gallery figcaption {
      text-align: center;
      margin: 5px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="gallery"></div>

  <script>
    window.addEventListener('load', function() {
      const gallery = document.querySelector('.gallery');
      const images = [];

      // Fetch captions from .md file
      fetch('gallery-captions.md')
        .then(response => response.text())
        .then(data => {
          const captions = data.split('\n');
          captions.pop(); // Remove last empty element
          captions.forEach((caption, i) => {
            const image = new Image();
            image.src = `gallery/image${i+1}.jpg`;
            image.alt = caption;
            const figcaption = document.createElement('figcaption');
            figcaption.textContent = caption;
            gallery.appendChild(image);
            gallery.appendChild(figcaption);
            images.push(image);
          });
        })
        .catch(error => console.log(error));

      // Wait for images to load before displaying gallery
      Promise.all(images.map(image => {
        return new Promise((resolve, reject) => {
          image.addEventListener('load', resolve);
          image.addEventListener('error', reject);
        });
      }))
      .then(() => {
        gallery.style.display = 'flex';
      })
      .catch(error => console.log(error));
    });
  </script>
</body>
</html>
